<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <title>UCF Lunar Knights</title>
 
   
    <script src="/socket.io/socket.io.js"></script>
 
    <!-- Code for socket.io -->
    <script>
        var socket = io.connect();
 
        // Send data through socket
        socket.on('message', function (message) {
             console.log(message);
         });
 
        function sendWASD(value) {
            socket.emit('WASD', value);
 
         }
 
        function forward() {
            document.getElementById("status").innerHTML = "Moving Forward";
            sendWASD(87); //W
        }

        function reverse() {
            document.getElementById("status").innerHTML = "Moving Backwards";
            sendWASD(83); //S
        }
 
        function left() {
            document.getElementById("status").innerHTML = "Turning Left";
            sendWASD(65); //A
        }
 
        function right() {
            document.getElementById("status").innerHTML = "Turning Right";
            sendWASD(68); //D
        }
 
        function stop() {
            document.getElementById("status").innerHTML = "Halted and standing by";
            sendWASD(32); //Space
        }

        function getKeypress() {
            //Get the Keypress
            var input = document.getElementById("textbox").value;

            //Call the required function
            if(input=="W" || input=="w"){
                forward();
            }

            else if(input=="S" || input=="s"){
                reverse();
            }

            else if(input=="A" || input == "a"){
                left();
            }

            else if(input=="D" || input=="d"){
                right();
            }

            else if(input == " "){
                stop();
            }

            //Clear the Text Box for visual purposes
            document.getElementById("textbox").value = "";
        }
    </script>
</head>


<body>
<!-- Home -->
<div data-role="page" id="page1">
    <div data-theme="a" data-role="header">
        <h3>
            UCF Lunar Knights
        </h3>
    </div>
    
    <div data-role="content">
        <iframe src="http://192.168.1.103:8070/stream_simple.html" width= "640" height = "480" scrolling= "no">Image should be here</iframe>
        <div data-role="fieldcontain">
        </div>
 
        <button id= "forwardBtn" style="" onclick=forward()>Forward</button>
        <button id = "backwardBtn" style=""onclick=reverse()>Backward</button>
        <button id = "leftBtn" style="" onclick=left()>Left</button>
        <button id = "rightBtn" style="" onclick=right()>Right</button>
        <button id = "stopBtn" style="color:red" onclick=stop()>STOP</button>
        <input id='textbox' type="text" onkeypress=getKeypress() onkeyup=getKeypress()>
    </div>

    <div id="StatusBox" data-role="content" >
       <div class="first"></div>
       <span>Current Status: </span>
       <span id="status">Ready</span>
    </div>
</div>
</body>
</html>

